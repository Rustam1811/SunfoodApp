<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∏—Å—Ç–æ—Ä–∏–π</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 10px; }
        .result { background: #f8f9fa; padding: 10px; border-radius: 4px; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –∏—Å—Ç–æ—Ä–∏–π</h1>
    
    <button class="button" onclick="createStory()">–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∏—Å—Ç–æ—Ä–∏—é</button>
    <button class="button" onclick="getStories()">–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∏—Å—Ç–æ—Ä–∏–∏</button>
    
    <div id="result" class="result" style="display: none;"></div>

    <script>
        const baseUrl = 'https://us-central1-coffeeaddict-c9d70.cloudfunctions.net';

        function showResult(data) {
            const element = document.getElementById('result');
            element.style.display = 'block';
            element.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
        }

        async function createStory() {
            try {
                const expiresAt = new Date();
                expiresAt.setHours(expiresAt.getHours() + 24);

                const response = await fetch(`${baseUrl}/stories`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: 'create',
                        story: {
                            title: '–¢–µ—Å—Ç–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è',
                            content: {
                                type: 'text',
                                text: '–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è! üéâ',
                                backgroundColor: '#FF6B6B'
                            },
                            duration: 5,
                            isActive: true,
                            expiresAt: expiresAt.toISOString()
                        }
                    }),
                });
                const data = await response.json();
                showResult(data);
            } catch (error) {
                showResult({ error: error.message });
            }
        }

        async function getStories() {
            try {
                const response = await fetch(`${baseUrl}/stories`);
                const data = await response.json();
                showResult(data);
            } catch (error) {
                showResult({ error: error.message });
            }
        }
    </script>
</body>
</html>
